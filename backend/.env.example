# ============================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================
PORT=3001
NODE_ENV=development

# ============================================
# BASE DE DATOS POSTGRESQL
# ============================================
# Desarrollo local:
# Nota: usar 127.0.0.1 evita problemas de IPv6 (::1) en algunas instalaciones.
DATABASE_URL="postgresql://usuario:password@127.0.0.1:5432/gestioneo?schema=public"
DIRECT_URL="postgresql://usuario:password@127.0.0.1:5432/gestioneo?schema=public"

# Producción (Supabase con connection pooling):
# DATABASE_URL="postgresql://postgres.xxxxx:PASSWORD@aws-0-sa-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres.xxxxx:PASSWORD@aws-0-sa-east-1.pooler.supabase.com:5432/postgres"

# ============================================
# JWT - AUTENTICACIÓN
# ============================================
# IMPORTANTE: Cambiar en producción a un valor aleatorio de mínimo 32 caracteres
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# NUNCA usar el valor por defecto en producción
JWT_SECRET=CHANGE_THIS_SECRET_IN_PRODUCTION_MIN_32_CHARS
JWT_EXPIRES_IN=24h

# ============================================
# MERCADOPAGO - PAGOS
# ============================================
# Configuración global (deprecated - usar OAuth por tenant en su lugar)
MERCADOPAGO_ACCESS_TOKEN=TEST-xxxx
MERCADOPAGO_PUBLIC_KEY=TEST-xxxx

# MercadoPago OAuth (para multi-tenant)
# Crear aplicación en: https://www.mercadopago.com.ar/developers/panel/app
MP_APP_ID=your_app_id_here
MP_APP_SECRET=your_app_secret_here

# CRÍTICO: Secret para verificar webhooks de MercadoPago
# Obtenerlo desde el panel de MercadoPago en la configuración de webhooks
# NUNCA deployar a producción sin este valor configurado
MERCADOPAGO_WEBHOOK_SECRET=your_webhook_secret_here

# Opción para deshabilitar verificación en desarrollo (NO usar en producción)
# SKIP_WEBHOOK_VERIFICATION=true

# ============================================
# ENCRIPTACIÓN
# ============================================
# Clave para encriptar credenciales sensibles (tokens de MercadoPago, etc.)
# DEBE ser exactamente 64 caracteres hexadecimales (32 bytes)
# Generar con: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# NUNCA usar el valor por defecto en producción
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# ============================================
# FRONTEND - CORS
# ============================================
# URL(s) del frontend permitidas para CORS (separadas por coma si son múltiples)
# Ejemplos:
#   Desarrollo: http://localhost:5173
#   Producción: https://mirestaurante.com
#   Múltiples: https://mirestaurante.com,https://www.mirestaurante.com
# CRÍTICO: En producción, la aplicación fallará si esta variable no está configurada
FRONTEND_URL=http://localhost:5173

# ============================================
# IMPRESIÓN / BRIDGE
# ============================================
# Token de autenticación para el servicio de impresión local
# Generar con: node -e "console.log(require('crypto').randomBytes(16).toString('base64'))"
BRIDGE_TOKEN=CHANGE_THIS_BRIDGE_TOKEN_IN_PRODUCTION
PRINT_WIDTH_MM=80
PRINT_MAX_RETRIES=3
PRINT_BACKOFF_MS=2000
PRINT_CLAIM_TTL_MS=60000

# ============================================
# EMAIL (Opcional - para notificaciones)
# ============================================
# Descomentar si se usa servicio de email
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=tu-email@gmail.com
# SMTP_PASS=tu-app-password
# EMAIL_FROM=noreply@turestaurante.com
